<div ng-controller=projectsCtrl><div><table class="col-md-10 col-md-offset-1 table-borderedtable-condensed projectsTable"><thead class=cf><thead class=blackBorder><tr><th>Title</th><th>Description</th><th>Start Date</th><th>End Date</th><th>Is Billable</th><th>Is Active</th></tr></thead><tbody id=projectTableBody class=blackBorder><tr ng-repeat="project in projects" class=clickableRow ng-class="{'selectedRow': selectedPk==project.pk && (state == 0|| state == 2)}" ng-click=selectToggle(project.pk)><td><span ng-if="editPk == project.pk"><input class=selectedInput type=text ng-model=editingProject.title></span> <span ng-if="editPk != project.pk">{{project.title}}</span></td><td><span ng-if="editPk == project.pk"><input class=selectedInput type=text ng-model=editingProject.description></span> <span ng-if="editPk != project.pk">{{project.description}}</span></td><td><span ng-if="editPk == project.pk"><input class=selectedInput type=date ng-model=editingProject.start_date></span> <span ng-if="editPk != project.pk">{{project.start_date}}</span></td><td><span ng-if="editPk == project.pk"><input class=selectedInput type=date ng-model=editingProject.end_date></span> <span ng-if="editPk != project.pk">{{project.end_date}}</span></td><td><span ng-if="editPk == project.pk" class=centerText><input type=checkbox ng-model=editingProject.is_billable></span> <span ng-if="editPk != project.pk">{{project.is_billable}}</span></td><td><span ng-if="editPk == project.pk" class=centerText><input type=checkbox ng-model=editingProject.is_active></span> <span ng-if="editPk != project.pk">{{project.is_active}}</span></td></tr><tr ng-if="state == 3"><td><span><input class=selectedInput type=text ng-model=newProject.title></span></td><td><span><input class=selectedInput type=text ng-model=newProject.description></span></td><td><span><input class=selectedInput type=date ng-model=newProject.start_date></span></td><td><span><input class=selectedInput type=date ng-model=newProject.end_date></span></td><td><span class=centerText><input type=checkbox ng-model=newProject.is_billable></span></td><td><span class=centerText><input type=checkbox ng-model=newProject.is_active></span></td></tr></tbody></thead></table></div><div class=container><button class="btn btn-primary" ng-click=deleteToggle() ng-disabled="selectedPk == -1 || (state != 0 && state != 2)"><span ng-if="state != 2">Delete</span> <span ng-if="state == 2">Cancel</span></button> <button class="btn btn-primary" ng-if="state == 2" ng-click=deleteProject()>Confirm Delete</button> <button class="btn btn-primary" ng-click=editToggle() ng-disabled="selectedPk == -1 || (state != 0 && state != 1)"><span ng-if="state != 1">Edit</span> <span ng-if="state == 1">Cancel</span></button> <button ng-if="state == 1" class="btn btn-primary" ng-click=saveEdit()>Save Edit</button> <button class="btn btn-primary" ng-click=toggleNew() ng-disabled="(state != 0 && state != 3)"><span ng-if="state != 3">New Record</span> <span ng-if="state == 3">Cancel</span></button> <button ng-if="state == 3" class="btn btn-primary" ng-click=createProject()>Save New</button></div><div id=container ng-if="selected.task_set.length > 0"><table class="col-md-10 col-md-offset-1 table-bordered table-condensed taskTable"><thead class=taskTableHead><tr><th>Title</th><th>Due Date</th><th>Estimated Hours</th></tr></thead><tbody><tr ng-repeat="task in selected.task_set"><td datatitle=Title>{{task.title}}</td><td datatitle="Due Date">{{task.due_date.substring(0,10)}}</td><td datatitle="Estimated Hours">{{task.estimated_hours}}</td></tr></tbody></table></div><div id=container class="col-md-10 col-md-offset-1" ng-if="selected.task_set.length == 0">This project has no tasks</div></div>